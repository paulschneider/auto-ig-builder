"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const _1 = require(".");
const rules_1 = require("./rules");
const allowedRulesMap = new Map([
    [
        _1.Profile,
        [
            rules_1.CardRule,
            rules_1.CaretValueRule,
            rules_1.ContainsRule,
            rules_1.AssignmentRule,
            rules_1.FlagRule,
            rules_1.ObeysRule,
            rules_1.OnlyRule,
            rules_1.BindingRule
        ]
    ],
    [
        _1.Extension,
        [
            rules_1.CardRule,
            rules_1.CaretValueRule,
            rules_1.ContainsRule,
            rules_1.AssignmentRule,
            rules_1.FlagRule,
            rules_1.ObeysRule,
            rules_1.OnlyRule,
            rules_1.BindingRule
        ]
    ],
    [_1.Instance, [rules_1.AssignmentRule]],
    [_1.FshValueSet, [rules_1.ValueSetComponentRule, rules_1.CaretValueRule]],
    [_1.FshCodeSystem, [rules_1.ConceptRule, rules_1.CaretValueRule]],
    [_1.Mapping, [rules_1.MappingRule]],
    [
        _1.RuleSet,
        [
            rules_1.CardRule,
            rules_1.CaretValueRule,
            rules_1.ConceptRule,
            rules_1.ContainsRule,
            rules_1.AssignmentRule,
            rules_1.FlagRule,
            rules_1.MappingRule,
            rules_1.ObeysRule,
            rules_1.OnlyRule,
            rules_1.ValueSetComponentRule,
            rules_1.BindingRule
        ]
    ]
]);
/**
 * Checks if a rule is allowed. In this context "allowed" means allowed to be exported, so an
 * InsertRule is not allowed anywhere, because you can't actually export an InsertRule, you must expand
 * it into its list of rules, and then export those rules.
 * @param fshDefinition
 * @param rule
 * @returns - true if rule is allowed on fshDefinition, false otherwise
 */
function isAllowedRule(fshDefinition, rule) {
    var _a;
    return (_a = allowedRulesMap.get(fshDefinition.constructor)) === null || _a === void 0 ? void 0 : _a.some(r => rule instanceof r);
}
exports.isAllowedRule = isAllowedRule;
//# sourceMappingURL=AllowedRules.js.map